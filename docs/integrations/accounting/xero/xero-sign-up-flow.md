---
title: "Build a Sign Up with Xero flow"
description: "Learn how to enable the Sign Up with Xero flow with Codat to support your app's certification"
---

Codat has made it easier for you to implement Sign Up with Xero. It is a flow that allows you to quickly onboard your potential customers using pre-populated data from their Xero accounting software and show them the unique value of your app faster. 

## When to build?

The Sign Up with Xero flow is a strict requirement for all app partners seeking certification and listing on the Xero App Store. Therefore, Xero expects to see a working example of the flow as part of your App Partner application. Note that you will only be able to launch your app and complete your listing once your application is fully approved.

## How to build?

First, make sure you have a 

The customer initiates your app from the Xero marketplace, and is immediately redirected via connect request URL to 

merchant clicks your app from the marketplace

The flow 

Sign Up with Xero is intended to bring potential customers directly to your app from the Xero Marketplace. It allows customers to provision an app trial or an account for your app that is pre-populated with their Xero data.

The intention is you use Xero OpenID data to pre-populate existing signup forms (e.g. application or onboarding form). If you do not have an existing page you should consider build one as you will require a URL to redirect customers. In future steps we will defer to this link to this page as your Sign up success redirect URL.

Provide clients with a Sign up with Xero  redirect URL to send users to once they have chosen to add an app via a marketplace or to send users to that want to sign up to a client app using Xero credentials on the client app login page.


## Sign Up with Xero URL is the URL that will be shared with the end user to authorise access to Xero.

As part of your App Store Listing this becomes the 6. Purchase/sign up page URL.

This URL is generated by Codat, but requires customisation to you and your Codat instance.

Step 1: Retrieve ClientID
GET /profile/SyncSettings (link)
This value will by required for the next step.

Step 2: Retrieve PlatformKey
Xero platform key: gbol 

For a full list of integration platform keys:

GET /integrations (link)
Step 3: Generate Sign Up with Xero URL
Use the values of ClientID and PlatformKey retrieved in Step 1 and 2 to generate your Sign Up with Xero URL. This URL will remain fixed for each instance of Codat (e.g. Test account, Production).

e.g.

https://link-api.codat.io/clients/{ClientID}/signUpWith/{PlatformKey}
What does Sign Up with Xero URL do?

When this link is initiated a few things happen:

1. A Company and Connection is created in Codat

2. For the end user this links functions similarly to the existing linkURL and redirects the user to their Xero login for authorisation.

3. Once authorised they will be redirected to your Sign up success redirect URL. 


## 4. Utilise Xero Data
When redirected you should use Xero OpenID data to pre-populate onboarding forms or fields (according to Xero's requirements). 

Sample redirect with OpenId parameters:

{SignUpSuccessRedirectURL}?companyId=f3069a22-ce9a-499b-b341-a7d6564c65z1&connectionId=4302ebaf-aba6-4763-ba61-47a7992634a3&statusCode=200&openId_email=j.doe%2B1%40codat.io&openId_given_name=John&openId_family_name=Doe
Note: You can use the Codat API and CompanyId to pull additional information of interest e.g. Company Info, Customers, Accounts etc.


### Set your Sign up success redirect URL

From the Codat Portal Settings page navigate to Redirects (Settings > Auth Flow > Redirects).

Under Sign up success redirect URL enter the base URL of your signup form.

Screenshot_20230118_143523.png

Note: Enter the base URL only - no parameter replacements.



https://link-api.codat.io/clients/{ClientID}/signUpWith/{PlatformKey}
What does Sign Up with Xero URL do?

When this link is initiated a few things happen:

1. A Company and Connection is created in Codat

2. For the end user this links functions similarly to the existing linkURL and redirects the user to their Xero login for authorisation.

3. Once authorised they will be redirected to your Sign up success redirect URL. 

## Other consideratinos

### . Managing the Codat company
Within Codat all companies created via the flow will have a the name "Xero-YYYY-MM-DD-THHMMSS".

This is because, at the point of creation, we don't have any identifying information for the user. 

If you have specific company naming conventions (e.g. internal identifiers) this can be updated via the API (or Portal) using the CompanyID returned as part of the Xero OpenID data.

PUT /companies/{companyId} (link)
-----------------------------
{
   "name": "{companyName}"
}

### User Cancelled mid-flow
Similar to building a link authorisation flow if a user cancels mid-flow you should build in the ability to handle via an error page. As part of the OpenId response parameters you will receive the appropriate status code. For a full list of codes see Status codes and errors.

 