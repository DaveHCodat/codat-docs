---
title: "Troubleshooting"
description: "Resolve some common errors that you may encounter with Sync for Commerce"
createdAt: "2022-04-21T17:44:33.185Z"
updatedAt: "2022-11-18T17:51:18.675Z"
---

:::caution Beta testing

Sync for Commerce is in beta. If you are interested in building with Sync for Commerce, please [get in touch](mailto:sync-for-commerce@codat.io).
:::

## Status codes

| Code | Reason                                        |
| :--- | :-------------------------------------------- |
| 1000 | In Progress                                   |
| 1010 | In Progress (Long running - over ten minutes) |
| 2000 | Success (Data pushed)                         |
| 2040 | Success (No data pushed)                      |
| 4000 | Configuration Error                           |
| 4040 | Company deleted/de-authorized                 |
| 4220 | Company deleted/de-authorized                 |
| 4260 | Accounting platform billing expiry            |
| 5000 | Generic Server error                          |
| 5080 | Duplication protection                        |
| 5120 | Data processing error                         |
| 5130 | Data push error                               |

## Error messages

This section describes the errors that are related to Sync for Commerce configuration. Some of them can be avoided by following this set of best practices:

- Ensure that the Codat company that you create for your merchant has both accounting and commerce data connections and they are linked correctly.
- If you are re-linking the company, make sure that the previous one is deleted.
- Ensure that the invoice status for **Payments** is set to `submitted`.
- Avoid using payout/prepaid accounts for **Payments**.
- Make sure to configure the grouping for all the features.
- When choosing configuration options, only use the options provided by Codat.

### How to resolve configuration errors

| Error message | Error resolution |
|---|---|
| Company needs to have two valid data connections. | This error surfaces if a company does not have 2 valid data connections **OR** both data connections do not have the linked status.  * Ensure that the Codat company created for the merchant has 2 valid data connections. 1 commerce and 1 accounting connection are required.  * Ensure that the Codat company has both data connection statuses set to linked by using the public API connection resource OR via the-no code merchant link journey using the link URL generated by the Codat app portal. |
| To sync fees: Payments section needs to exist Payments account id needs to be set | The Fees feature cannot be used until the Payment feature is configured. * The merchant should complete the configuration of Payments in order to sync Fees. |
| Payments config invalid. {prepaid account} should not match {prepaid payment account}. Accounts config invalid. Prepaid account in Sales should not match {CommerceAccountType. PrepaidPayment} in Payments." | The prepaid account and the payment account should not be the same. * Reconfigure the selected accounts for prepaid and prepaid payments. |
| Payments config invalid. {Card Acount} should not match {Payout Account}. | This error surfaces if the account selected for Payments matches the payout account. * Reconfigure the selected accounts for payments and payouts. |
| No sales customer has been configured. | This error surfaces if the sales customer is missing from the configuration. * Configure the sales customer from the available options on the config options. |
| Selected customer not present in customer options. | This error surfaces if the configured sales customer does not match a valid customerId present in the customerOptions. Note: The customerOptions are customer records fetched from the merchant's accounting package. During the onfiguration, select from the available options under the customerOptions on the Codat configuration API. selectedCustomerId must always match with a record surfaced in the customerOptions objects. |
| Selected Account is not a valid option. | The selectedAccountId value for the nominal account for paymentFees configuration is not from the list of nominal accounts surfaced under accountOptions or is an invalid value. During the configuration, only select from the available options under accountOptions on the Codat configuration API. selectedAccountId must always match a valid record surfaced in the accountOptions objects. |
| No grouping period selected. Grouping period selected not from options. | Merchants should be able to configure grouping for their invoices. In Sync for Commerce, grouping is done by time (daily) and by country/location of orders. Note: At the time of writing, the only time-based grouping option available is daily. This means all orders of a day would be grouped into a daily invoice. During the configuration, the grouping object in the config API has groupingPeriod.selectedGroupingPeriod must have a value available from the groupingPeriodOptions. If in the grouping object in the config API the groupingPeriod.selectedGroupingPeriod is set to null, an error surfaces stating there's no grouping period selected. If the grouping object is set to any value that is not from the groupingPeriodOptions, then an error is thrown stating that the value was not selected from the available options. * Update the configuration on the Codat configuration API with a valid grouping period option. |
| Invalid invoice level grouping selected. | Merchants should be able to configure grouping for their invoices. In Sync for Commerce, grouping is done by time (daily) and by country/location of orders. This error surfaces for the locations-based grouping where selectedGroupByOptions value is not from groupByOptions. During the configuration, the grouping object in the config API has groupingLevels.invoiceLevels. selectedGroupByOptions must have a value available from the groupByOptions. * Update the configuration on the Codat configuration API with a valid invoice-level grouping option. |
| Invalid invoice line level grouping selected. | This error surfaces for invalid groupings on grouping.invoiceLineLevel based grouping where selectedGroupByOptions value is not from groupByOptions. During the configuration, the grouping object in the config API that has groupingLevels.invoiceLineLevel. selectedGroupByOptions must have a value available from `groupByOptions. * Update the configuration on the Codat configuration API with a valid line-level grouping option. |
| Payments cannot be enabled if invoice status is set to 'draft'. | Payments cannot be enabled for synchronization if the invoices are not Active and are set to the Draft status. * A draft invoice cannot have any associated payments. The merchant should change the preferred invoice status for Payments to Submitted. |
| Config contains required accounts without selections. | Configuration requires accounts to be selected. This error surfaces if any of the required accounts is not selected (e.g., Sales). SMB has not selected a required nominal account for pushing sales/commerce data against. * Make sure that the merchant cannot complete the configuration without selecting the accounts for required features that can be found here. |
| No Sales Account Present. | This error surfaces if the merchant's accounting package has no nominal account categorized as a Sales account. You can build a feature to create a nominal account in the merchant’s accounting package, leveraging Codat’s Sync or public Core API resources. The merchants can manually add a Sales account on their respective accounting platform. |
| No schedule selected frequency. | This error surfaces if no schedule was configured during the configuration stage. * Configure the data synchronization schedule. |
| Selected schedule frequency not present in options. | This error surfaces if the configured schedule does not conform to the set of options surfaced by the configuration API. * Configure a valid syncing schedule from the available scheduler options. |
| No selected invoice status. | This error surfaces if invoice status is was not selected. * During the configuration, select the preferred invoice status (Submitted or Draft). Note: Payments cannot be synchronized if their Invoice status is set to Draft. |
| Invalid invoice status selected (must be submitted or draft). | The invoice status to be selected must be Submitted or Draft. Any other value will lead to this error being surfaced. * During the configuration, select the preferred invoice status (Submitted or Draft). |
| Tax rate is missing selected tax rate id. | This exception surfaces if the tax rate was not set during the configuration. * Reconfigure the tax rate on the Codat configuration API using the provided options. |
| Selected tax rate id for {key}% tax-rate has no options. | This errors surfaces if the selected tax rate is not available or is not from the list of supported tax rates. Reconfigure the tax rate on the Codat configuration API using the provided options. During the configuration, only use the options available on the config API. |
| No fees supplier has been configured. Selected supplier not present in supplier options. | These error surfaces if no fees supplier has been provided or it does not match any of the options provided by Codat. * During the configuration, select the fees provider from the options available on the config API. |
|  |  |

[block:parameters]
{
"data": {
"h-0": "Error message",
"h-1": "Error resolution",
"0-0": "Company needs to have two valid data connections.",
"0-1": "This error surfaces if a company does not have 2 valid data connections **OR** both data connections do not have the `linked` status.

\\\_ Ensure that the Codat company created for the merchant has 2 valid data connections. 1 commerce and 1 accounting connection are required.

\\\_ Ensure that the Codat company has both data connection statuses set to `linked` by using the public API connection resource **OR** via the-no code merchant link journey using the link URL generated by the Codat app portal.",
"1-0": "To sync fees:

- Payments section needs to exist
- Payments account `id` needs to be set",
  "1-1": "The **Fees** feature cannot be used until the **Payment** feature is configured.

\\\* The merchant should complete the configuration of **Payments** in order to sync **Fees**.",
"2-0": "Payments config invalid. `{prepaid account}` should not match `{prepaid payment account}`.

Accounts config invalid. Prepaid account in Sales should not match `{CommerceAccountType. PrepaidPayment}` in Payments."",
"2-1": "The prepaid account and the payment account should not be the same.

\\\* Reconfigure the selected accounts for prepaid and prepaid payments.",
"3-0": "Payments config invalid. `{Card Acount}` should not match `{Payout Account}`.",
"3-1": "This error surfaces if the account selected for **Payments** matches the payout account.

\\\* Reconfigure the selected accounts for payments and payouts.",
"4-0": "No sales customer has been configured.",
"4-1": "This error surfaces if the sales customer is missing from the configuration.

\\\* Configure the sales customer from the available options on the config options.",
"5-0": "Selected customer not present in customer options.",
"5-1": "This error surfaces if the configured sales customer does not match a valid `customerId` present in the `customerOptions`.

**Note**: The `customerOptions` are customer records fetched from the merchant's accounting package.

_ During the onfiguration, select from the available options under the `customerOptions` on the Codat configuration API.  
_ `selectedCustomerId` must always match with a record surfaced in the `customerOptions` objects.",
"6-0": "Selected Account is not a valid option.",
"6-1": "The `selectedAccountId` value for the nominal account for `paymentFees` configuration is not from the list of nominal accounts surfaced under `accountOptions` or is an invalid value.

_ During the configuration, only select from the available options under `accountOptions` on the Codat configuration API.  
_ `selectedAccountId` must always match a valid record surfaced in the `accountOptions` objects.",
"7-0": "No grouping period selected.

Grouping period selected not from options.",
"7-1": "Merchants should be able to configure grouping for their invoices. In Sync for Commerce, grouping is done by time (daily) and by country/location of orders.

**Note**: At the time of writing, the only time-based grouping option available is **daily**. This means all orders of a day would be grouped into a daily invoice.

During the configuration, the grouping object in the config API has `groupingPeriod.selectedGroupingPeriod` must have a value available from the `groupingPeriodOptions`.

If in the grouping object in the config API the `groupingPeriod.selectedGroupingPeriod` is set to `null`, an error surfaces stating there's no grouping period selected.

If the grouping object is set to any value that is not from the `groupingPeriodOptions`, then an error is thrown stating that the value was not selected from the available options.

\\\* Update the configuration on the Codat configuration API with a valid grouping period option.",
"8-0": "Invalid invoice level grouping selected.",
"8-1": "Merchants should be able to configure grouping for their invoices. In Sync for Commerce, grouping is done by time (daily) and by country/location of orders.

This error surfaces for the locations-based grouping where `selectedGroupByOptions` value is not from `groupByOptions`.

During the configuration, the grouping object in the config API has `groupingLevels.invoiceLevels. selectedGroupByOption`s  
must have a value available from the `groupByOptions`.

\\\* Update the configuration on the Codat configuration API with a valid invoice-level grouping option.",
"9-0": "Invalid invoice line level grouping selected.",
"9-1": "This error surfaces for invalid groupings on `grouping.invoiceLineLevel` based grouping where `selectedGroupByOptions` value is not from `groupByOptions`.

During the configuration, the grouping object in the config API that has `groupingLevels.invoiceLineLevel. selectedGroupByOptions` must have a value available from \\`groupByOptions.

\\\* Update the configuration on the Codat configuration API with a valid line-level grouping option.",
"10-0": "Payments cannot be enabled if invoice status is set to 'draft'.",
"10-1": "**Payments** cannot be enabled for synchronization if the invoices are not **Active** and are set to the **Draft** status.

\\\* A draft invoice cannot have any associated payments. The merchant should change the preferred invoice status for **Payments** to **Submitted**.",
"11-0": "Config contains required accounts without selections.",
"11-1": "Configuration requires accounts to be selected. This error surfaces if any of the required accounts is not selected (e.g., **Sales**).

SMB has not selected a required nominal account for pushing sales/commerce data against.

\\\* Make sure that the merchant cannot complete the configuration without selecting the accounts for required features that can be found [here](/sync-data-pushing).",
"12-0": "No Sales Account Present.",
"12-1": "This error surfaces if the merchant's accounting package has no nominal account categorized as a **Sales** account.

_ You can build a feature to create a nominal account in the merchant’s accounting package, leveraging Codat’s Sync or public Core API resources.  
_ The merchants can manually add a **Sales** account on their respective accounting platform.",
"13-0": "No schedule selected frequency.",
"13-1": "This error surfaces if no schedule was configured during the configuration stage.

\\\* Configure the data synchronization schedule.",
"14-0": "Selected schedule frequency not present in options.",
"14-1": "This error surfaces if the configured schedule does not conform to the set of options surfaced by the configuration API.

\\\* Configure a valid syncing schedule from the available scheduler options.",
"15-0": "No selected invoice status.",
"15-1": "This error surfaces if invoice status is was not selected.

\\\* During the configuration, select the preferred invoice status (**Submitted** or **Draft**).

**Note**: **Payments** cannot be synchronized if their Invoice status is set to **Draft**.",
"16-0": "Invalid invoice status selected (must be submitted or draft).",
"16-1": "The invoice status to be selected must be **Submitted** or **Draft**. Any other value will lead to this error being surfaced.

\\\* During the configuration, select the preferred invoice status (**Submitted** or **Draft**).",
"17-0": "Tax rate is missing selected tax rate id.",
"17-1": "This exception surfaces if the tax rate was not set during the configuration.

\\\* Reconfigure the tax rate on the Codat configuration API using the provided options.",
"18-0": "Selected tax rate id for `{key}% tax-rate` has no options.",
"18-1": "This errors surfaces if the selected tax rate is not available or is not from the list of supported tax rates.

_ Reconfigure the tax rate on the Codat configuration API using the provided options.  
_ During the configuration, only use the options available on the config API.",
"19-0": "No fees supplier has been configured.

Selected supplier not present in supplier options.",
"19-1": "These error surfaces if no fees supplier has been provided or it does not match any of the options provided by Codat.

\\\* During the configuration, select the fees provider from the options available on the config API."
},
"cols": 2,
"rows": 20,
"align": [
"left",
"left"
]
}
[/block]

## Post-configuration errors

After the commerce data is delivered into the merchant's accounting platform, there are still some things to keep in mind to ensure that Sync for Commerce performs well:

- Advise your merchants to not update, deactivate or delete the accounts they selected to use with Sync for Commerce.
- Advise your merchants not to change the settings on the selected accounts (for example, tax rates) as this will result in a synchronization error.

### How to resolve post-configuration errors

[block:parameters]
{
"data": {
"h-0": "Error message",
"h-1": "Error description and resolution",
"0-0": "Accounts are not found.",
"0-1": "During the scheduled data sync, validation verifies that the data in the selected nominal accounts is consistent and no accounts have been changed or deleted. This error surfaces in case any such accounts are detected.

\\\* To resolve, reconfigure selected accounts on the Codat configuration API.",
"1-0": "Account Id is not in an **Active** state.",
"1-1": "During the first stage of the sync, validation checks to verify that the data in the selected nominal accounts is consistent and no accounts have status other than `Active`. This error is surfaced in case any such accounts are detected.

_ To resolve, reconfigure the selected accounts on the Codat configuration API.  
_ Ensure that nominal accounts are not set to any other status than active i.e. archived or deleted.",
"2-0": "Customer is not in an **Active** state.",
"2-1": "During the first stage of the sync, validation checks to verify that no `salesCustomer` data from the merchant’s accounting package in `customerOptions` is set to any other status other than **Active**. This error is surfaced in case any such customers are detected.

_ To resolve, reconfigure `salesCustomer` on the configuration API endpoint.  
_ Ensure that `selectedCustomerId` is not any in other status other than **Active**.",
"3-0": "Customer `{customerId}` does not exist.",
"3-1": "During the first stage of the sync, validation checks to verify that `salesCustomer` is consistent and no customer data has been changed or deleted. This error is surfaced in case any such changes are detected.

\\\* To resolve, reconfigure selected accounts on the Codat configuration API.",
"4-0": "Supplier does not exist.",
"4-1": "During the first stage of the sync, validation checks to verify that supplier data is consistent and no customer data has changed or been deleted. This error is surfaced in case any such changes are detected.

\\\* To resolve, reconfigure supplier on the Codat configuration API.",
"5-0": "Supplier is not in an **Active** state.",
"5-1": "During the first stage of the sync, validation checks to verify that no supplier data is set to any other state except for **Active**. This error is surfaced in case any inactive suppliers are detected.

To resolve, reconfigure the supplier on the config API.",
"6-0": "Tax Rate {taxRateId} does not exist.

The following Tax Rates are invalid: `{Tax rate}`.",
"6-1": "During the first stage of the sync, validation checks to verify that the tax rate data is consistent and no tax rate data has been changed or deleted. This error is surfaced in case any updated tax data is detected.

To resolve, reconfigure the tax rate on the config API."
},
"cols": 2,
"rows": 7,
"align": [
"left",
"left"
]
}
[/block]

### Errors resolved by Codat

To resolve these errors, contact your Codat representative.

[block:parameters]
{
"data": {
"h-0": "Error message",
"h-1": "Error description and resolution",
"0-0": "No company was found with ID.",
"0-1": "This exception is thrown when a company record does not exist. It may have previously existed and been  
 deleted.",
"1-0": "Date overlaps with a previous sync date range.",
"1-1": "This error surfaces when a scheduled daily sync overlaps or conflicts with a manually triggered sync."
},
"cols": 2,
"rows": 2,
"align": [
"left",
"left"
]
}
[/block]
